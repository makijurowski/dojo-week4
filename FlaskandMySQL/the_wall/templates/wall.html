<html>
    <head>
        <meta charset="utf-8">
        <title>The Wall</title>
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}">
    </head>
    <body>

        <header class="navigation">
            <div class="no-margin left-col-50">
                <h1 id="title">Coding Dojo: The Wall</h1>
            </div>
            <div class="no-margin right-col-50">
                <div id="login">
                    <h4 id="greeting">{{ greeting }}</h4>

                    {% if session['logged_in'] == True %}
                    <span id="logout"><a href="/user/logout">Log out</a></span>
                    {% else %}
                    <span id="logout"><a href="/user/login">Login</a> or <a href="/user/create">Register</a></span>
                    {% endif %}

                </div>
            </div>
        </header>

        <main>
            <div id="wrapper">
                <div class="message">
                    <form class="message-form" action="/message/create" method="POST">
                        <label for="message"><h2>Post a new message</h2></label>
                        <textarea class="text-box" id="message-box" name="message" value="{{ message }}"></textarea>
                        <input type="hidden" name="user_id" value="1">
                        <button type="submit" id="message-button" name="submit" class="button">Post a message</button>
                    </form>
                </div>
                <div class="messages">
                    {% for message in all_messages %}
                    <div class="new-message">
                        <h4 class="username">[{{ message['first_name'] }} {{ message['last_name'] }}, ID: {{ message['user_id'] }}]</h4> <span class="datestamp"> posted at {{ message['created_at'] }}</span>
                        <p class="message-content">
                            {{ message['message'] }}
                            {% for comment in all_comments %}
                                {% if comment.message_id == message.id %}
                                    {{comment['comment']}}
                                {% endif %}
                            {% endfor %}
                        </p>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </main>

        <footer id="footer">

        </footer>

    </body>
</html>